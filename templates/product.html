{% extends "base.html" %}

{% block title %} {{ product.name }} {% endblock %}

{% block content %}
<div class="container mx-auto p-6">

  <!-- Product Section -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <!-- Image -->
    <div>
      <img src="{{ product.product_img }}" alt="{{ product.name }}" class="w-full rounded-lg shadow-md">
    </div>

    <!-- Details -->
    <div>
      <h1 class="text-3xl font-bold mb-2">{{ product.name }}</h1>
      <p class="text-gray-600 mb-2">Category: {{ product.category }}</p>
      <p class="text-xl font-semibold text-green-600 mb-4">₹{{ product.price }}</p>
      <p class="mb-4">{{ product.description }}</p>

      {% if product.is_available %}
        <span class="px-3 py-1 bg-green-200 text-green-800 rounded-full">In Stock</span>
        <a href="/">Buy Now</a>
        <a>Add To Cart</a>
      {% else %}
        <span class="px-3 py-1 bg-red-200 text-red-800 rounded-full">Out of Stock</span>
        <a href="/">Notify Me</a>
      {% endif %}

      <!-- Rating -->
      <div class="flex items-center mt-4">
        {% for i in range(5) %}
          {% if i < product.rating %}
            ⭐
          {% else %}
            ☆
          {% endif %}
        {% endfor %}
        <span class="ml-2 text-sm text-gray-500">({{ product.rating }}/5)</span>
      </div>

      <p class="text-sm text-gray-500 mt-2">Published on: {{ product.date_published }}</p>
      <p class="text-sm text-gray-500">Retailer: {{ product.retailer }}</p>
    </div>
  </div>

  <!-- Reviews Section -->
  <div class="mt-10">
    <h2 class="text-2xl font-bold mb-4">Customer Reviews</h2>

    {% if product.reviews %}
      <div class="space-y-4">
        {% for review in product.reviews %}
          <div class="border p-4 rounded-lg shadow-sm bg-gray-50">
            <div class="flex items-center mb-2">
              <img src="{{ review.profile_pic }}" alt="{{ review.username }}" class="w-10 h-10 rounded-full mr-3">
              <div>
                <p class="font-semibold">{{ review.username }}</p>
                <p class="text-xs text-gray-500">{{ review.date_posted }}</p>
              </div>
            </div>
            <p>{{ review.review_text }}</p>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p class="text-gray-500">No reviews yet. Be the first to review!</p>
    {% endif %}
  </div>

</div>
{% endblock %}
