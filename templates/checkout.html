{% extends 'base.html' %}

{% block title %} Checkout {% endblock %}

{% block content %}
<script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

<div class="max-w-3xl mx-auto p-6 bg-white rounded-lg shadow-md mt-6">
  <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">Checkout</h1>

  <!-- Items in cart -->
  <div class="mb-6">
    <h2 class="text-xl font-semibold mb-3 text-gray-700">Order Summary</h2>
    <div class="divide-y divide-gray-200">
      {% for item in cart %}
      <div class="flex justify-between py-3">
        <div>
          <p class="font-medium text-gray-800">{{ item.name }}</p>
          <p class="text-sm text-gray-500">Qty: {{ item.quantity }}</p>
        </div>
        <p class="text-gray-700">₹{{ "%.2f"|format(item.price * item.quantity) }}</p>
      </div>
      {% endfor %}
    </div>

    <div class="flex justify-between font-bold text-lg mt-4">
      <span>Total:</span>
      <span>₹{{ "%.2f"|format(cart | sum(attribute='subtotal')) }}</span>
    </div>
  </div>

  <!-- Payment form -->
  <div class="mb-6">
    <h2 class="text-xl font-semibold mb-3 text-gray-700">Payment Details</h2>

    <form method="POST" action="/place-order" class="space-y-4">
      <div>
        <label for="card-name" class="block text-sm font-medium text-gray-700">Cardholder Name</label>
        <input type="text" id="card-name" name="card_name" placeholder="John Doe"
          class="mt-1 w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500">
      </div>

      <div>
        <label for="card-number" class="block text-sm font-medium text-gray-700">Card Number</label>
        <input type="text" id="card-number" name="card_number" maxlength="16" placeholder="1234 5678 9012 3456"
          class="mt-1 w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500">
      </div>

      <div class="grid grid-cols-2 gap-4">
        <div>
          <label for="expiry" class="block text-sm font-medium text-gray-700">Expiry Date</label>
          <input type="text" id="expiry" name="expiry" placeholder="MM/YY"
            class="mt-1 w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500">
        </div>

        <div>
          <label for="cvv" class="block text-sm font-medium text-gray-700">CVV</label>
          <input type="password" id="cvv" name="cvv" maxlength="3" placeholder="123"
            class="mt-1 w-full px-3 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring-emerald-500 focus:border-emerald-500">
        </div>
      </div>

      <button type="submit"
        class="w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 px-4 rounded-lg transition-colors duration-200">
        Place Order
      </button>
    </form>
  </div>
</div>
{% endblock %}
